window.addEventListener('DOMContentLoaded',()=>{const content=document.getElementById('sd9000Content');const searchBox=document.querySelector('#sd9000Search input');const getPairs=(store)=>{const list=[];for(let i=0;i<store.length;i++){const k=store.key(i);const v=store.getItem(k);list.push({key:k,val:v})}
return list};const renderList=(list,type)=>{content.innerHTML='';const filter=(searchBox.value||'').toLowerCase();list.filter((item)=>item.key.toLowerCase().includes(filter)||item.val.toLowerCase().includes(filter)).forEach(({key,val})=>{const row=document.createElement('div');row.className='sd9000Row';row.innerHTML=`
          <input class="sd9000Key" value="${key}" disabled>
          <input class="sd9000Val" value="${val}">
          <button onclick="(() => {
            const v = this.parentElement.querySelector('.sd9000Val').value;
            (${type === 'localStorage' ? 'localStorage' : type === 'sessionStorage' ? 'sessionStorage' : 'null'}).setItem('${key}', v);
          })()">💾</button>
          <button onclick="(() => {
            (${type === 'localStorage' ? 'localStorage' : type === 'sessionStorage' ? 'sessionStorage' : 'null'}).removeItem('${key}');
            window.sd9000Render('${type}');
          })()">🗑️</button>
        `;content.appendChild(row)})};const renderCookies=()=>{content.innerHTML='';const cookies=document.cookie.split(';');cookies.forEach((c)=>{const[k,...v]=c.split('=');const key=decodeURIComponent(k.trim());const val=decodeURIComponent(v.join('='));const row=document.createElement('div');row.className='sd9000Row';row.innerHTML=`
        <input class="sd9000Key" value="${key}" disabled>
        <input class="sd9000Val" value="${val}">
        <button onclick="document.cookie = '${encodeURIComponent(key)}=' + encodeURIComponent(this.parentElement.querySelector('.sd9000Val').value) + '; path=/'">💾</button>
        <button onclick="document.cookie = '${encodeURIComponent(key)}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/'">🗑️</button>
      `;content.appendChild(row)})};const renderIndexedDB=async()=>{content.innerHTML='';const list=await indexedDB.databases();if(!list.length)return(content.innerHTML='🗃 No IndexedDBs found.');for(let db of list){const dbRow=document.createElement('div');dbRow.innerHTML=`📦 ${db.name} v${db.version}`;content.appendChild(dbRow)}};const renderExtras=()=>{content.innerHTML=`
      <div style="margin-bottom:10px;"><button onclick="alert('UUID: ' + crypto.randomUUID())">🎲 Generate UUID</button></div>
      <div>
        <input id="jwtInput" style="width:95%;" placeholder="Paste JWT here to decode">
        <button onclick="(() => {
          const jwt = document.getElementById('jwtInput').value.split('.')[1];
          try {
            const json = atob(jwt);
            alert('Decoded:\\n' + JSON.stringify(JSON.parse(json), null, 2));
          } catch(e) {
            alert('Invalid JWT');
          }
        })()">🔓 Decode JWT</button>
      </div>
      <div style="margin-top:10px;">
        <button onclick="alert('👽 You found the terminal: type &quot;open_terminal()&quot; in console')">🧪 Hidden Terminal</button>
      </div>
    `};window.sd9000Render=async(type='localStorage')=>{if(type==='localStorage')renderList(getPairs(localStorage),'localStorage');else if(type==='sessionStorage')renderList(getPairs(sessionStorage),'sessionStorage');else if(type==='Cookies')renderCookies();else if(type==='IndexedDB')await renderIndexedDB();else if(type==='Extras')renderExtras();window.sd9000CurrentType=type};searchBox.addEventListener('input',()=>window.sd9000Render(window.sd9000CurrentType));document.getElementById('sd9000AddBtn').onclick=()=>{const k=document.getElementById('sd9000NewKey').value;const v=document.getElementById('sd9000NewVal').value;if(!k)return;const target=window.sd9000CurrentType==='localStorage'?localStorage:window.sd9000CurrentType==='sessionStorage'?sessionStorage:null;if(target){target.setItem(k,v);window.sd9000Render(window.sd9000CurrentType)}else if(window.sd9000CurrentType==='Cookies'){document.cookie=`${encodeURIComponent(k)}=${encodeURIComponent(v)}; path=/`;window.sd9000Render('Cookies')}
document.getElementById('sd9000NewKey').value='';document.getElementById('sd9000NewVal').value=''};document.getElementById('sd9000Export').onclick=()=>{const store=window.sd9000CurrentType==='localStorage'?localStorage:window.sd9000CurrentType==='sessionStorage'?sessionStorage:null;if(!store)return;const obj={};for(let i=0;i<store.length;i++){const k=store.key(i);obj[k]=store.getItem(k)}
const blob=new Blob([JSON.stringify(obj,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`${window.sd9000CurrentType}.json`;a.click();URL.revokeObjectURL(url)};document.getElementById('sd9000Import').onclick=()=>{const input=document.createElement('input');input.type='file';input.accept='.json';input.onchange=(e)=>{const file=e.target.files[0];const reader=new FileReader();reader.onload=()=>{const obj=JSON.parse(reader.result);const store=window.sd9000CurrentType==='localStorage'?localStorage:window.sd9000CurrentType==='sessionStorage'?sessionStorage:null;if(store){Object.entries(obj).forEach(([k,v])=>store.setItem(k,v));window.sd9000Render(window.sd9000CurrentType)}};reader.readAsText(file)};input.click()};window.addEventListener('storage',(e)=>{if(e.storageArea===localStorage&&window.sd9000CurrentType==='localStorage'){window.sd9000Render('localStorage')}
if(e.storageArea===sessionStorage&&window.sd9000CurrentType==='sessionStorage'){window.sd9000Render('sessionStorage')}});window.open_terminal=()=>{const term=prompt('👾 Terminal activated. Command:');try{const result=eval(term);alert('✅ '+result)}catch(e){alert('❌ '+e.message)}};window.sd9000CurrentType=window.sd9000CurrentType||'localStorage';window.sd9000Render(window.sd9000CurrentType)})
